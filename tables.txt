PRAGMA foreign_keys = ON;

CREATE TABLE User(
	Id INTEGER PRIMARY KEY AUTOINCREMENT,
	Handle VARCHAR(255) NOT NULL, 
	CONSTRAINT UIX_Handle UNIQUE(Handle)
);

CREATE TABLE Message(
	UserId INTEGER NOT NULL,
	Body VARCHAR(255) NOT NULL,   -- TODO: SET MESSAGE CHARACTER LIMIT
	Time DATETIME NOT NULL DEFAULT (strftime('%Y-%m-%d %H:%M:%S', 'now', 'localtime')),
	Handle VARCHAR(255),
	CONSTRAINT FK_User_ID FOREIGN KEY (UserID) REFERENCES User(Id)
);
